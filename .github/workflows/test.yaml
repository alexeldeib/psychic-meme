name: kernel

on:
  push:
    branches: [ '**' ]
  pull_request:
    branches: [ '**' ]

jobs:
  kernel:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: build
      run: |
        sudo apt-get update && sudo apt-get install -yq tree
        bash ./scripts/firecracker.sh
        bash ./scripts/buildroot.sh
        ls -al
        tree -L 2 .
        tree -L 2 dist
        tree images
        docker build . -t test
        docker run -it --rm --entrypoint ls -al /dist test
        # stat -c "%n %s" images/jammy/jammy.*
      shell: bash
